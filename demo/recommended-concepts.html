<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../gid-recommend-concepts.html">
<style>
	table, th, td {
		border: 1px solid grey;
		border-collapse: collapse;
	}
	td {
		text-align: center;
	}
</style>

<dom-module id="recommended-concepts">
	<template>

		<gid-recommend-concepts api-url="https://srv-34-197-77-167.globalids.com:8443/api/v1"
								column = '6877887334376552697' api-token = 'MTAxNjUwMzAxMTUwMzQ2NjAyODQxMzA5MDFY'
								recommendedconcepts = {{recommendedconcepts}}>
		</gid-recommend-concepts>
		<template is="dom-if" if="[[recommendedconcepts.length]]">
			<div class="horizontal-section">
				<template is="dom-repeat" items="[[recommendedconcepts]]">
					<p></p>
					{{item.label}}
					<button type="button" id = "{{item.id}}" value = "YES" on-click = "verifyConcept">YES</button>
					<button type="button" id = "{{item.id}}" value = "NO" on-click = "verifyConcept">NO</button>
					<button type="button" id = "{{item.id}}" value = "MAYBE" on-click = "verifyConcept">MAYBE</button>
				</template>
			</div>
		</template>
		<template is="dom-if" if="[[beVerified]]">
			<gid-recommend-concepts api-url="https://srv-34-197-77-167.globalids.com:8443/api/v1"
									column = '6877887334376552697'
									api-token = 'MTAxNjUwMzAxMTUwMzQ2NjAyODQxMzA5MDFY'
									be-verified = {{beVerified}}
									concept = "{{concept}}"
									verify-val = "{{verifyVal}}"
									verifiedconcepts = {{verifiedconcepts}}>
			</gid-recommend-concepts>
		</template>
		<template is="dom-if" if="[[verifiedconcepts.length]]">
			<template is="dom-repeat" items="[[verifiedconcepts]]">
				<div class="horizontal-section">
					<p></p>
					<table style="width:50%">
						<tr>
							<th>Concept Label</th>
							<th>Is verified</th>
						</tr>
						<tr>
							<td>{{item.label}}</td>
							<td>{{item.verified}}</td>
						</tr>
					</table>
				</div>
			</template>
		</template>
	</template>
	<script>
		(function () {
			'use strict';
			Polymer({
				is: 'recommended-concepts',
				properties: {
					concept: {
						type: String,
						notify: true,
						value: ''
					},
					column: {
						type: String,
						notify: true,
						value: ''
					},
					beVerified: {
						type: Boolean,
						notify: true
					},
					verifyVal:{
						type: String,
						notify: true,
						value: ''
					},
					apiUrl: {
						type: String,
						notify: true,
						value: ''
					},
					verifiedconcepts: {
						type: Array,
						notify: true
					},
					recommendedconcepts: {
						type: Array,
						notify: true
					}

				},
				verifyConcept: function(event){
					this.concept = event.currentTarget.id;
					this.verifyVal = event.currentTarget.value;
					this.beVerified = true;
				}

			});
		})();


	</script>
</dom-module>
